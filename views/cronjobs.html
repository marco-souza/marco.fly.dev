<div class="flex gap-4 align-center py-4">
    <h1 class="text-2xl">Task Scheduler</h1>

    <button class="btn btn-sm" onclick="create_dialog.showModal()">
        + Task
    </button>
</div>

<dialog
    id="create_dialog"
    class="modal modal-middle"
    _="on htmx:afterRequest close() me"
>
    <div class="modal-box">
        <form method="dialog">
            <button
                id="create_dialog_close"
                hx-trigger="create-close"
                class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
                âœ•
            </button>
        </form>

        <h3 class="font-bold text-lg">Create a new cron</h3>
        <form
            hx-post="/api/cron"
            hx-target="#content"
            _="on htmx:afterRequest reset() me"
        >
            <div class="label" for="id">
                <span class="label-text">Cron Expression:</span>
            </div>
            <input
                type="text"
                id="cron"
                name="cron"
                placeholder="Type a cronjob expression"
                class="input input-bordered w-full max-w-xs"
            />

            <div class="label" for="editor">
                <span class="label-text">Lua callback:</span>
            </div>
            <textarea id="editor" name="snippet" rows="10" class="w-full">
print("Hello, ðŸŒ™!")</textarea
            >

            <button class="btn" type="submit">Create Cronjob</button>
        </form>
    </div>

    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<div id="content">{{template "partials/cron-list" .}}</div>
